\chapter{Solution}

\section{Hardware}
% Responsible: Lukas Krahbichler

\subsection{Computer}
To select the single-board computer, several options were compared based on their processing power, affordability, and compatibility:
\begin{itemize}
	\item \textbf{NVIDIA Jetson Nano:} This board offers strong AI capabilities, with a GPU that supports advanced neural network computations. However, it was significantly more expensive than alternatives and its AI-focused design exceeded the project's requirements for image processing.
	\item \textbf{ASUS Tinker Board S:} While affordable, this board lacked sufficient computational power for real-time image processing tasks, rendering it unsuitable for the project.
	\item \textbf{ArmSom Sige7 (Basic):} This board provided the optimal balance between affordability and processing performance. It supports the necessary image processing workloads while staying within budget.
\end{itemize}
The ArmSom Sige7 Basic variant was selected due to its sufficient computational power and cost-effectiveness. The Pro Max version, while offering better performance, was deemed unnecessary for this project's scope and budget. Price comparisons and performance benchmarks further confirmed the suitability of the chosen model.

\subsection{Camera}
The camera module chosen was the 4K model from ArmSom, specifically designed to integrate seamlessly with the ArmSom Sige7. This decision prioritized compatibility and reduced integration risks, avoiding potential issues with third-party hardware. The high resolution theoretically extends the effective tracking range, making it ideal for drone detection at longer distances.
% Problems encountered with the camera module during testing can be documented here for future improvements.

\subsection{Display}
Initially, a 10.1-inch Full HD display from ArmSom was integrated into the primary station. The display was chosen for its compatibility with the ArmSom Sige7 and its reasonable price. However, as the project progressed, a redesign of the housing necessitated its removal. Redirecting the visualization to a laptop allowed for a more compact and efficient housing design. This change eliminated the need for a larger primary station housing, optimizing portability and practicality.
% The display: https://www.armsom.org/product-page/armsom-display-10-hd

\subsection{Power Supply}
The chosen power supply was a PD 100 W, 20,000mAh power bank with USB-C output. This model met the project's technical requirements as follows:
\begin{itemize}
	\item It supports USB-PD, essential for powering the ArmSom Sige7.
	\item Its 100W output ensures compatibility with all connected components, including the PCB.
	\item It has three ports, enabling simultaneous connections for the ArmSom board, the PCB, and charging functionality.
\end{itemize}
Initial issues arose when the power bank intermittently failed to provide a stable output for the ArmSom board, despite meeting technical specifications. The power bank's behavior included unexpected cycling on and off, which necessitated adding two separate start buttonsâ€”one for the power bank and one for the ArmSom board. Although a custom power management system would have resolved these issues, time constraints required relying on this solution.

\subsection{Data Transfer}
NRF24L01+ PA + LNA modules with external antennas were used to establish a local radio communication network. These modules replaced smaller NRF24L01 modules with PCB antennas, which failed in the required 3-node mesh configuration. While the updated modules resolved reliability issues, their high transmission power caused interference when modules operated in close proximity. This problem was mitigated by limiting the transmission power to appropriate levels, ensuring stable operation.
% Problems with these modules can be detailed further

\subsection{Calibration}

The calibration hardware ensures precise alignment and positioning of the primary and secondary stations, which is critical for accurate 3D tracking. Each station features a rotatable head capable of moving in two axes (pitch and yaw), while roll adjustments are handled through software corrections based on gyroscope measurements. Although the rotation functionality is not required for the secondary stations, all stations share the same design to streamline production and minimize complexity. The primary station uniquely incorporates a Time-of-Flight (ToF) laser for precise distance measurements, whereas the secondary stations rely solely on their cameras for alignment.

\subsection{Calibration}

The calibration hardware ensures precise alignment and positioning of the primary and secondary stations, which is essential for accurate 3D drone tracking. Each station features a rotatable head capable of moving in two axes (pitch and yaw), while roll adjustments are handled through software corrections using gyroscope measurements. Although the rotation capability is not strictly necessary for the secondary stations, the design was standardized across all stations to simplify production and reduce complexity. The primary station incorporates a Time-of-Flight (ToF) laser for precise distance measurements, while the secondary stations rely on their cameras for alignment.

\subsubsection*{Components and Functionality}

\paragraph{Rotatable Head (Pitch and Yaw Axes):}
The rotatable head utilizes 28BYJ-48 stepper motors, chosen for their compact size, cost-effectiveness, and sufficient precision for this application. These motors are controlled using ULN2003 driver boards, ensuring reliable step control and compatibility with the system's microcontroller. To limit the movement range of the motors, end-switches are installed in a normally closed configuration. This setup not only detects wiring faults, such as loose connections or damaged cables, but also provides accurate position references for the motors during calibration. Servos were initially considered for their higher torque and precision, but they were ultimately dismissed due to their larger size, higher cost, and additional complexity.

\paragraph{Gyroscope and Compass:}
The GY-521 gyroscope module provides 6-axis data, combining accelerometer and gyroscope readings. It is essential for real-time tilt measurement and inclination compensation, allowing the system to maintain proper alignment even on uneven terrain. A GY-271 compass module was included to provide absolute rotational data but was eventually excluded from the calibration process due to its unreliable performance. Extensive testing revealed significant inconsistencies between compass readings on different stations and fluctuations during repeated calibration attempts. While the compass remains physically present on the PCB, it is not active in the current calibration setup.

\paragraph{ToF Laser Module:}
The primary station employs a DFRobot Infrared Laser Distance Sensor capable of measuring distances from 5 centimeters up to 80 meters with millimeter-level accuracy. This sensor plays a critical role in determining the precise distance between stations during calibration. The ToF laser operates using infrared light and requires an unobstructed line of sight to function effectively. It is integrated into the rotatable head alongside the camera and communication modules to facilitate accurate alignment with secondary stations.

\paragraph{Camera for Visual Alignment:}
Each station is equipped with a 4K camera module, which is used for visual identification and alignment during calibration. The cameras locate the distinct bright orange secondary stations within their field of view, enabling precise positioning. This approach replaces earlier attempts to use radio-based direction finding, which proved unreliable at the short distances required for this application.

\subsubsection*{Hardware Limitations and Decisions}
The calibration hardware relies on the combined functionality of the stepper motors, gyroscope, ToF laser, and cameras. Early designs included motorized feet for roll adjustments and compass-based absolute orientation, but these were discarded due to practical limitations. While the standardization of design across all stations simplified manufacturing, it introduced some redundant functionality, such as the rotatable head on secondary stations, which is rarely used for calibration purposes.

\section{Housing}

% Responsible: Prantl Niclas

\section{Programming}

\subsection{3D Angle Calculations}
% Responsible: Prantl Niclas

\subsection{Camera Tracking}
% Responsible: Lukas Krahbichler

\subsection{Data Transfer}
% Responsible: Lukas Krahbichler

\subsection{Calibration}
% Responsible: Lukas Krahbichler

\subsection{3D Visualization}
% Responsible: Prantl Niclas
